var Formstone=this.Formstone=function(t,e,i){"use strict";function n(t){p.Plugins[t].initialized||(p.Plugins[t].methods._setup.call(i),p.Plugins[t].initialized=!0)}function s(t,e,i,n){var s,o={raw:{}};n=n||{};for(s in n)n.hasOwnProperty(s)&&("classes"===t?(o.raw[n[s]]=e+"-"+n[s],o[n[s]]="."+e+"-"+n[s]):(o.raw[s]=n[s],o[s]=n[s]+"."+e));for(s in i)i.hasOwnProperty(s)&&("classes"===t?(o.raw[s]=i[s].replace(/{ns}/g,e),o[s]=i[s].replace(/{ns}/g,"."+e)):(o.raw[s]=i[s].replace(/.{ns}/g,""),o[s]=i[s].replace(/{ns}/g,e)));return o}function o(){var t,e={transition:"transitionend",MozTransition:"transitionend",OTransition:"otransitionend",WebkitTransition:"webkitTransitionEnd"},n=["transition","-webkit-transition"],s={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},o="transitionend",a="",r="",l=i.createElement("div");for(t in e)if(e.hasOwnProperty(t)&&t in l.style){o=e[t],p.support.transition=!0;break}h.transitionEnd=o+".{ns}";for(t in n)if(n.hasOwnProperty(t)&&n[t]in l.style){a=n[t];break}p.transition=a;for(t in s)if(s.hasOwnProperty(t)&&s[t]in l.style){p.support.transform=!0,r=s[t];break}p.transform=r}function a(){p.windowWidth=p.$window.width(),p.windowHeight=p.$window.height(),f=d.startTimer(f,m,r)}function r(){for(var t in p.ResizeHandlers)p.ResizeHandlers.hasOwnProperty(t)&&p.ResizeHandlers[t].callback.call(e,p.windowWidth,p.windowHeight)}function l(t,e){return parseInt(t.priority)-parseInt(e.priority)}var c=function(){this.Version="0.6.4",this.Plugins={},this.ResizeHandlers=[],this.window=e,this.$window=t(e),this.document=i,this.$document=t(i),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.userAgent=e.navigator.userAgent||e.navigator.vendor||e.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(e.File&&e.FileList&&e.FileReader),history:!!(e.history&&e.history.pushState&&e.history.replaceState),matchMedia:!(!e.matchMedia&&!e.msMatchMedia),raf:!(!e.requestAnimationFrame||!e.cancelAnimationFrame),touch:!!("ontouchstart"in e||e.DocumentTouch&&i instanceof e.DocumentTouch),transition:!1,transform:!1}},d={killEvent:function(t,e){try{t.preventDefault(),t.stopPropagation(),e&&t.stopImmediatePropagation()}catch(i){}},startTimer:function(t,e,i,n){return d.clearTimer(t),n?setInterval(i,e):setTimeout(i,e)},clearTimer:function(t,e){t&&(e?clearInterval(t):clearTimeout(t),t=null)},sortAsc:function(t,e){return parseInt(e)-parseInt(t)},sortDesc:function(t,e){return parseInt(e)-parseInt(t)}},p=new c,u={base:"{ns}",element:"{ns}-element"},h={namespace:".{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",resize:"resize.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};c.prototype.Plugin=function(i,o){return p.Plugins[i]=function(i,o){function a(e){var s="object"===t.type(e);e=t.extend(!0,{},o.defaults||{},s?e:{});for(var a=this,r=0,l=a.length;l>r;r++){var d=a.eq(r);if(!c(d)){var p=d.data(i+"-options"),u=t.extend(!0,{$el:d},e,"object"===t.type(p)?p:{});d.addClass(o.classes.raw.element).data(y,u),n(i),o.methods._construct.apply(d,[u].concat(Array.prototype.slice.call(arguments,s?1:0)))}}return a}function r(){o.functions.iterate.apply(this,[o.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(o.classes.raw.element).removeData(y)}function c(t){return t.data(y)}function f(e){if(this instanceof t){var i=o.methods[e];return"object"!==t.type(e)&&e?i&&0!==e.indexOf("_")?o.functions.iterate.apply(this,[i].concat(Array.prototype.slice.call(arguments,1))):this:a.apply(this,arguments)}}function m(i){var n=o.utilities[i]||o.utilities._initialize||!1;return n?n.apply(e,Array.prototype.slice.call(arguments,"object"===t.type(i)?0:1)):void 0}function g(e){o.defaults=t.extend(!0,o.defaults,e||{})}function v(e){for(var i=this,n=0,s=i.length;s>n;n++){var o=i.eq(n),a=c(o)||{};"undefined"!==t.type(a.$el)&&e.apply(o,[a].concat(Array.prototype.slice.call(arguments,1)))}return i}var y="fs-"+i,w="fs"+i.replace(/(^|\s)([a-z])/g,function(t,e,i){return e+i.toUpperCase()});return o.initialized=!1,o.priority=o.priority||10,o.classes=s("classes",y,u,o.classes),o.events=s("events",i,h,o.events),o.functions=t.extend({getData:c,iterate:v},d,o.functions),o.methods=t.extend(!0,{_setup:t.noop,_construct:t.noop,_destruct:t.noop,_resize:!1,destroy:r},o.methods),o.utilities=t.extend(!0,{_initialize:!1,_delegate:!1,defaults:g},o.utilities),o.widget&&(t.fn[i]=t.fn[w]=f),t[i]=t[w]=o.utilities._delegate||m,o.namespace=i,o.namespaceClean=w,o.methods._resize&&(p.ResizeHandlers.push({namespace:i,priority:o.priority,callback:o.methods._resize}),p.ResizeHandlers.sort(l)),o}(i,o),p.Plugins[i]};var f=null,m=20;return p.$window.on("resize.fs",a),a(),t(function(){p.$body=t("body");for(var e in p.Plugins)p.Plugins.hasOwnProperty(e)&&n(e)}),h.clickTouchStart=h.click+" "+h.touchStart,o(),p}(jQuery,this,document);!function(t,e){"use strict";function i(t){t.touches=[],t.touching=!1,this.on(v.dragStart,y.killEvent),t.tap?(t.pan=!1,t.scale=!1,t.swipe=!1,e.support.touch?this.on([v.touchStart,v.pointerDown].join(" "),t,o):this.on(v.click,t,d)):(t.pan||t.swipe||t.scale)&&(t.tap=!1,t.swipe&&(t.pan=!0),t.scale&&(t.axis=!1),t.axis?(t.axisX="x"===t.axis,t.axisY="y"===t.axis):f(this,"none"),this.on([v.touchStart,v.pointerDown].join(" "),t,s),t.pan&&!e.support.touch&&this.on(v.mouseDown,t,o))}function n(){f(this.off(v.namespace),"")}function s(t){t.preventManipulation&&t.preventManipulation();var e=t.data,i=t.originalEvent;if(i.type.match(/(up|end)$/i))return void c(t);if(i.pointerId){var n=!1;for(var s in e.touches)e.touches[s].id===i.pointerId&&(n=!0,e.touches[s].pageX=i.clientX,e.touches[s].pageY=i.clientY);n||e.touches.push({id:i.pointerId,pageX:i.clientX,pageY:i.clientY})}else e.touches=i.touches;i.type.match(/(down|start)$/i)?o(t):i.type.match(/move$/i)&&a(t)}function o(e){var i=e.data,n="undefined"!==t.type(i.touches)?i.touches[0]:null;if(i.touching||(i.startE=e.originalEvent,i.startX=n?n.pageX:e.pageX,i.startY=n?n.pageY:e.pageY,i.startT=(new Date).getTime(),i.scaleD=1,i.passed=!1),i.tap)i.clicked=!1,i.$el.on([v.touchMove,v.pointerMove].join(" "),i,s).on([v.touchEnd,v.touchCancel,v.pointerUp,v.pointerCancel].join(" "),i,s);else if(i.pan||i.scale){i.$links&&i.$links.off(v.click);var o=p(i.scale?v.scaleStart:v.panStart,e,i.startX,i.startY,i.scaleD,0,0,"","");if(i.scale&&i.touches&&i.touches.length>=2){var r=i.touches;i.pinch={startX:u(r[0].pageX,r[1].pageX),startY:u(r[0].pageY,r[1].pageY),startD:h(r[1].pageX-r[0].pageX,r[1].pageY-r[0].pageY)},o.pageX=i.startX=i.pinch.startX,o.pageY=i.startY=i.pinch.startY}i.touching||(i.touching=!0,i.pan&&w.on(v.mouseMove,i,a).on(v.mouseUp,i,c),w.on([v.touchMove,v.touchEnd,v.touchCancel,v.pointerMove,v.pointerUp,v.pointerCancel].join(" "),i,s),i.$el.trigger(o))}}function a(e){var i=e.data,n="undefined"!==t.type(i.touches)?i.touches[0]:null,s=n?n.pageX:e.pageX,o=n?n.pageY:e.pageY,a=s-i.startX,r=o-i.startY,l=a>0?"right":"left",d=r>0?"down":"up",f=Math.abs(a)>b,m=Math.abs(r)>b;if(i.tap)(f||m)&&i.$el.off([v.touchMove,v.touchEnd,v.touchCancel,v.pointerMove,v.pointerUp,v.pointerCancel].join(" "));else if(i.pan||i.scale)if(!i.passed&&i.axis&&(i.axisX&&m||i.axisY&&f))c(e);else{!i.passed&&(!i.axis||i.axis&&i.axisX&&f||i.axisY&&m)&&(i.passed=!0),i.passed&&(y.killEvent(e),y.killEvent(i.startE));var g=!0,w=p(i.scale?v.scale:v.pan,e,s,o,i.scaleD,a,r,l,d);if(i.scale)if(i.touches&&i.touches.length>=2){var _=i.touches;i.pinch.endX=u(_[0].pageX,_[1].pageX),i.pinch.endY=u(_[0].pageY,_[1].pageY),i.pinch.endD=h(_[1].pageX-_[0].pageX,_[1].pageY-_[0].pageY),i.scaleD=i.pinch.endD/i.pinch.startD,w.pageX=i.pinch.endX,w.pageY=i.pinch.endY,w.scale=i.scaleD,w.deltaX=i.pinch.endX-i.pinch.startX,w.deltaY=i.pinch.endY-i.pinch.startY}else i.pan||(g=!1);g&&i.$el.trigger(w)}}function r(e,i){e.on(v.click,i,l);var n=t._data(e[0],"events").click;n.unshift(n.pop())}function l(t){y.killEvent(t,!0),t.data.$links.off(v.click)}function c(e){var i=e.data;if(i.tap)i.$el.off([v.touchMove,v.touchEnd,v.touchCancel,v.pointerMove,v.pointerUp,v.pointerCancel,v.mouseMove,v.mouseUp].join(" ")),i.startE.preventDefault(),d(e);else if(i.pan||i.scale){var n="undefined"!==t.type(i.touches)?i.touches[0]:null,s=n?n.pageX:e.pageX,o=n?n.pageY:e.pageY,a=s-i.startX,l=o-i.startY,c=(new Date).getTime(),u=i.scale?v.scaleEnd:v.panEnd,h=a>0?"right":"left",f=l>0?"down":"up",m=Math.abs(a)>1,g=Math.abs(l)>1;if(i.swipe&&Math.abs(a)>b&&c-i.startT<_&&(u=v.swipe),i.axis&&(i.axisX&&g||i.axisY&&m)||m||g){i.$links=i.$el.find("a");for(var y=0,x=i.$links.length;x>y;y++)r(i.$links.eq(y),i)}var k=p(u,e,s,o,i.scaleD,a,l,h,f);w.off([v.touchMove,v.touchEnd,v.touchCancel,v.mouseMove,v.mouseUp,v.pointerMove,v.pointerUp,v.pointerCancel].join(" ")),i.$el.trigger(k),i.touches=[],i.scale}i.touching=!1}function d(t){y.killEvent(t);var e=t.data;if(!e.clicked){"click"!==t.type&&(e.clicked=!0);var i=e.startE?e.startX:t.pageX,n=e.startE?e.startY:t.pageY,s=p(v.tap,t.originalEvent,i,n,1,0,0);e.$el.trigger(s)}}function p(e,i,n,s,o,a,r,l,c){return t.Event(e,{originalEvent:i,bubbles:!0,pageX:n,pageY:s,scale:o,deltaX:a,deltaY:r,directionX:l,directionY:c})}function u(t,e){return(t+e)/2}function h(t,e){return Math.sqrt(t*t+e*e)}function f(t,e){t.css({"-ms-touch-action":e,"touch-action":e})}var m=!e.window.PointerEvent,g=e.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,tap:!1},methods:{_construct:i,_destruct:n},events:{pointerDown:m?"MSPointerDown":"pointerdown",pointerUp:m?"MSPointerUp":"pointerup",pointerMove:m?"MSPointerMove":"pointermove",pointerCancel:m?"MSPointerCancel":"pointercancel"}}),v=g.events,y=g.functions,w=e.$window,b=10,_=50;v.tap="tap",v.pan="pan",v.panStart="panstart",v.panEnd="panend",v.scale="scale",v.scaleStart="scalestart",v.scaleEnd="scaleend",v.swipe="swipe"}(jQuery,Formstone),!function(t,e){"use strict";function i(t,i){if(i){t.$target=this.find(t.target),t.$check=t.target?t.$target:this,t.callback=i,t.styles=r(t.$check),t.timer=null;var n=t.$check.css(e.transition+"-duration"),o=parseFloat(n);e.support.transition&&n&&o?this.on(d.transitionEnd,t,s):t.timer=p.startTimer(t.timer,50,function(){a(t)},!0)}}function n(t){p.clearTimer(t.timer,!0),this.off(d.namespace)}function s(e){e.stopPropagation(),e.preventDefault();var i=e.data,n=e.originalEvent,s=i.target?i.$target:i.$el;i.property&&n.propertyName!==i.property||!t(n.target).is(s)||o(i)}function o(t){t.always||t.$el[c.namespace]("destroy"),t.callback.apply(t.$el)}function a(t){var e=r(t.$check);l(t.styles,e)||o(t),t.styles=e}function r(e){var i,n,s,o={};if(e instanceof t&&(e=e[0]),u.getComputedStyle){i=u.getComputedStyle(e,null);for(var a=0,r=i.length;r>a;a++)n=i[a],s=i.getPropertyValue(n),o[n]=s}else if(e.currentStyle){i=e.currentStyle;for(n in i)i[n]&&(o[n]=i[n])}return o}function l(e,i){if(t.type(e)!==t.type(i))return!1;for(var n in e)if(!e.hasOwnProperty(n)||!i.hasOwnProperty(n)||e[n]!==i[n])return!1;return!0}var c=e.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:i,_destruct:n,resolve:o}}),d=c.events,p=c.functions,u=e.window}(jQuery,Formstone),!function(t,e){"use strict";function i(){j=e.$body}function n(i){i.multiple=this.prop("multiple"),i.disabled=this.is(":disabled"),i.multiple?i.links=!1:i.external&&(i.links=!0);var n=this.find(":selected").not(":disabled"),s=n.text(),o=this.find("option").index(n);i.multiple||""===i.label?i.label="":(n=this.prepend('<option value="" class="'+I.item_placeholder+'" selected>'+i.label+"</option>"),s=i.label,o=0);var a=this.find("option, optgroup"),r=a.filter("option");i.tabIndex=this[0].tabIndex,this[0].tabIndex=-1;var d=[I.base,i.customClass];i.mobile||e.isMobile?d.push(I.mobile):i.cover&&d.push(I.cover),i.multiple&&d.push(I.multiple),i.disabled&&d.push(I.disabled);var p='<div class="'+d.join(" ")+'" tabindex="'+i.tabIndex+'"></div>',u="";i.multiple||(u+='<button type="button" class="'+I.selected+'">',u+=t("<span></span>").text(k(s,i.trim)).html(),u+="</button>"),u+='<div class="'+I.options+'">',u+="</div>",this.wrap(p).after(u),i.$dropdown=this.parent(P.base),i.$allOptions=a,i.$options=r,i.$selected=i.$dropdown.find(P.selected),i.$wrapper=i.$dropdown.find(P.options),i.$placeholder=i.$dropdown.find(P.placeholder),i.index=-1,i.guid=T++,i.closed=!0,i.keyDownGUID=O.keyDown+i.guid,i.clickGUID=O.click+i.guid,l(i),i.multiple||w(o,i),i.$selected.touch({tap:!0}).on(O.tap,i,c),i.$dropdown.on(O.click,P.item,i,f).on(O.close,i,h),this.on(O.change,i,m),e.isMobile||(i.$dropdown.on(O.focus,i,g).on(O.blur,i,v),this.on(O.focus,i,function(t){t.data.$dropdown.trigger(O.raw.focus)}))}function s(t){t.$dropdown.hasClass(I.open)&&t.$selected.trigger(O.click),t.$el[0].tabIndex=t.tabIndex,t.$dropdown.off(O.namespace),t.$options.off(O.namespace),t.$placeholder.remove(),t.$selected.remove(),t.$wrapper.remove(),t.$el.off(O.namespace).show().unwrap()}function o(t,e){if("undefined"!=typeof e){var i=t.$items.index(t.$items.filter("[data-value="+e+"]"));t.$items.eq(i).addClass(I.item_disabled),t.$options.eq(i).prop("disabled",!0)}else t.$dropdown.hasClass(I.open)&&t.$selected.trigger(O.click),t.$dropdown.addClass(I.disabled),t.$el.prop("disabled",!0),t.disabled=!0}function a(t,e){if("undefined"!=typeof e){var i=t.$items.index(t.$items.filter("[data-value="+e+"]"));t.$items.eq(i).removeClass(I.item_disabled),t.$options.eq(i).prop("disabled",!1)}else t.$dropdown.removeClass(I.disabled),t.$el.prop("disabled",!1),t.disabled=!1}function r(t){var e=t.index;t.$allOptions=t.$el.find("option, optgroup"),t.$options=t.$allOptions.filter("option"),t.index=-1,e=t.$options.index(t.$options.filter(":selected")),l(t),t.multiple||w(e,t)}function l(e){for(var i="",n=0,s=0,o=e.$allOptions.length;o>s;s++){var a=e.$allOptions.eq(s),r=[];if("OPTGROUP"===a[0].tagName)r.push(I.group),a.is(":disabled")&&r.push(I.disabled),i+='<span class="'+r.join(" ")+'">'+a.attr("label")+"</span>";else{var l=a.val();a.attr("value")||a.attr("value",l),r.push(I.item),a.hasClass(I.item_placeholder)&&r.push(I.item_placeholder),a.is(":selected")&&r.push(I.item_selected),a.is(":disabled")&&r.push(I.item_disabled),i+='<button type="button" class="'+r.join(" ")+'" ',i+='data-value="'+l+'">',i+=t("<span></span>").text(k(a.text(),e.trim)).html(),i+="</button>",n++}}e.$items=e.$wrapper.html(i).find(P.item)}function c(t){E.killEvent(t);var i=t.data;if(!i.disabled)if(i.mobile||!e.isMobile||e.isFirefoxMobile)i.closed?d(i):p(i);else{var n=i.$el[0];if(z.createEvent){var s=z.createEvent("MouseEvents");s.initMouseEvent("mousedown",!1,!0,S,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(s)}else n.fireEvent&&n.fireEvent("onmousedown")}}function d(e){if(e.closed){t(P.base).not(e.$dropdown).trigger(O.close,[e]);var i=e.$dropdown.offset(),n=j.outerHeight(),s=e.$wrapper.outerHeight(!0);e.index>=0?e.$items.eq(e.index).position():{left:0,top:0},i.top+s>n&&e.$dropdown.addClass(I.bottom),j.on(e.clickGUID,":not("+P.options+")",e,u),e.$dropdown.addClass(I.open),b(e),e.closed=!1}}function p(t){t&&!t.closed&&(j.off(t.clickGUID),t.$dropdown.removeClass([I.open,I.bottom].join(" ")),t.closed=!0)}function u(e){E.killEvent(e);var i=e.data;i&&0===t(e.currentTarget).parents(P.base).length&&p(i)}function h(t){var e=t.data;e&&p(e)}function f(e){E.killEvent(e);var i=t(this),n=e.data;if(!n.disabled){if(n.$wrapper.is(":visible")){var s=n.$items.index(i);s!==n.index&&(w(s,n),_(n))}n.multiple||p(n)}}function m(e,i){var n=t(this),s=e.data;if(!i&&!s.multiple){var o=s.$options.index(s.$options.filter("[value='"+C(n.val())+"']"));w(o,s),_(s)}}function g(t){E.killEvent(t);var e=t.data;e.disabled||e.multiple||e.$dropdown.addClass(I.focus).on(e.keyDownGUID,e,y)}function v(t){E.killEvent(t);var e=t.data;e.$dropdown.removeClass(I.focus).off(e.keyDownGUID),e.multiple||p(e)}function y(i){var n=i.data;if(13===i.keyCode)n.closed||(p(n),w(n.index,n)),_(n);else if(!(9===i.keyCode||i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)){E.killEvent(i);var s=n.$items.length-1,o=n.index<0?0:n.index;if(t.inArray(i.keyCode,e.isFirefox?[38,40,37,39]:[38,40])>-1)o+=38===i.keyCode||e.isFirefox&&37===i.keyCode?-1:1,0>o&&(o=0),o>s&&(o=s);else{var a,r,l=String.fromCharCode(i.keyCode).toUpperCase();for(r=n.index+1;s>=r;r++)if(a=n.$options.eq(r).text().charAt(0).toUpperCase(),a===l){o=r;break}if(0>o||o===n.index)for(r=0;s>=r;r++)if(a=n.$options.eq(r).text().charAt(0).toUpperCase(),a===l){o=r;break}}o>=0&&(w(o,n),b(n))}}function w(t,e){var i=e.$items.eq(t),n=e.$options.eq(t),s=i.hasClass(I.item_selected),o=i.hasClass(I.item_disabled);if(!o)if(e.multiple)s?(n.prop("selected",null),i.removeClass(I.item_selected)):(n.prop("selected",!0),i.addClass(I.item_selected));else if(t>-1&&t<e.$items.length){var a=n.data("label")||i.html();e.$selected.html(a).removeClass(P.item_placeholder),e.$items.filter(P.item_selected).removeClass(I.item_selected),e.$el[0].selectedIndex=t,i.addClass(I.item_selected),e.index=t}else""!==e.label&&e.$selected.html(e.label)}function b(t){var e=t.$items.eq(t.index),i=t.index>=0&&!e.hasClass(P.item_placeholder)?e.position():{left:0,top:0};t.$wrapper.scrollTop(t.$wrapper.scrollTop()+i.top)}function _(t){t.links?x(t):t.$el.trigger(O.raw.change,[!0])}function x(t){var e=t.$el.val();t.external?S.open(e):S.location.href=e}function k(t,e){return 0===e?t:t.length>e?t.substring(0,e)+"...":t}function C(t){return"string"==typeof t?t.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):t}var M=e.Plugin("dropdown",{widget:!0,defaults:{cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},methods:{_setup:i,_construct:n,_destruct:s,disable:o,enable:a,update:r,open:d,close:p},classes:["cover","bottom","multiple","mobile","open","disabled","focus","selected","options","group","item","item_disabled","item_selected","item_placeholder"],events:{tap:"tap",close:"close"}}),P=M.classes,I=P.raw,O=M.events,E=M.functions,T=0,S=e.window,z=(e.$window,e.document),j=null}(jQuery,Formstone),!function(t,e){"use strict";function i(e){e=e||{};for(var i in w)w.hasOwnProperty(i)&&(p[i]=e[i]?t.merge(e[i],p[i]):p[i]);p=t.extend(p,e),p.minWidth.sort(m.sortDesc),p.maxWidth.sort(m.sortAsc),p.minHeight.sort(m.sortDesc),p.maxHeight.sort(m.sortAsc);for(var n in w)if(w.hasOwnProperty(n)){y[n]={};for(var s in p[n])if(p[n].hasOwnProperty(s)){var o=window.matchMedia("("+w[n]+": "+(p[n][s]===1/0?1e5:p[n][s])+p.unit+")");o.addListener(a),y[n][p[n][s]]=o}}a()}function n(t,e,i){var n=f.matchMedia(e),s=l(n.media);v[s]||(v[s]={mq:n,active:!0,enter:{},leave:{}},v[s].mq.addListener(r));for(var o in i)i.hasOwnProperty(o)&&v[s].hasOwnProperty(o)&&(v[s][o][t]=i[o]);r(v[s].mq)}function s(t,e){if(t)if(e){var i=l(e);v[i]&&(v[i].enter[t]&&delete v[i].enter[t],v[i].leave[t]&&delete v[i].leave[t])}else for(var n in v)v.hasOwnProperty(n)&&(v[n].enter[t]&&delete v[n].enter[t],v[n].leave[t]&&delete v[n].leave[t])}function o(){g={unit:p.unit};for(var t in w)if(w.hasOwnProperty(t))for(var e in y[t])if(y[t].hasOwnProperty(e)&&y[t][e].matches){var i="Infinity"===e?1/0:parseInt(e,10);t.indexOf("max")>-1?(!g[t]||i<g[t])&&(g[t]=i):(!g[t]||i>g[t])&&(g[t]=i)}}function a(){o(),h.trigger(u.mqChange,[g])}function r(t){var e=l(t.media),i=v[e],n=t.matches?u.enter:u.leave;if(i&&i.active||!i.active&&t.matches){for(var s in i[n])i[n].hasOwnProperty(s)&&i[n][s].apply(i.mq);i.active=!0}}function l(t){return t.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return g}var d=e.Plugin("mediaquery",{utilities:{_initialize:i,state:c,bind:n,unbind:s},events:{mqChange:"mqchange"}}),p={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},u=t.extend(d.events,{enter:"enter",leave:"leave"}),h=e.$window,f=h[0],m=d.functions,g=null,v=[],y={},w={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone),!function(t,e){"use strict";function i(e){e.guid="__"+f++,e.enabled=!1,e.active=!1,e.classes=t.extend(!0,{},p,e.classes),e.target=this.data(d+"-target"),e.$target=t(e.target).addClass(e.classes.raw.target),e.linked=this.data(d+"-linked"),e.mq="(max-width:"+(e.maxWidth===1/0?"100000px":e.maxWidth)+")",e.mqGuid=e.classes.raw.base+"__"+f++;var i=this.data(d+"-group");e.group=i?"[data-"+d+'-group="'+i+'"]':!1,!e.collapse&&e.group&&t(e.group).eq(0).attr("data-"+d+"-active","true"),e.onEnable=this.data(d+"-active"),e.$swaps=t().add(this).add(e.$target),this.touch({tap:!0}).on(u.tap+e.guid,e,l),t.mediaquery("bind",e.mqGuid,e.mq,{enter:function(){a.call(e.$el,e)},leave:function(){r.call(e.$el,e)}})}function n(e){t.mediaquery("unbind",e.mqGuid,e.mq),e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")).off(u.namespace),this.touch("destroy")}function s(e,i){if(e.enabled&&!e.active){t(e.group).not(e.$el)[c.namespace]("deactivate");var n=e.group?t(e.group).index(e.$el):null;e.$swaps.addClass(e.classes.raw.active),e.linked&&!i&&t(e.linked).not(e.$el).swap("activate",!0),this.trigger(u.activate,[n]),e.active=!0}}function o(e,i){e.enabled&&e.active&&(e.$swaps.removeClass(e.classes.raw.active),e.linked&&!i&&t(e.linked).not(e.$el).swap("deactivate",!0),this.trigger(u.deactivate),e.active=!1)}function a(e,i){e.enabled||(e.$swaps.addClass(e.classes.raw.enabled),i||t(e.linked).not(e.$el).swap("enable"),e.enabled=!0,this.trigger(u.enable),e.onEnable?(e.active=!0,e.$swaps.addClass(e.classes.raw.active)):(e.active=!0,o.call(this,e)))}function r(e,i){e.enabled&&(e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")),i||t(e.linked).not(e.$el).swap("disable"),this.trigger(u.disable),e.enabled=!1)}function l(t){h.killEvent(t);var e=t.data;e.active&&e.collapse?o.call(e.$el,e):s.call(e.$el,e)}var c=e.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{tap:"tap",activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:i,_destruct:n,activate:s,deactivate:o,enable:a,disable:r}}),d=c.namespace,p=c.classes,u=c.events,h=c.functions,f=0}(jQuery,Formstone),!function(t,e){"use strict";function i(){h.iterate.call(m,a)}function n(){m=t(p.element)}function s(e){e.maxWidth=e.maxWidth===1/0?"100000px":e.maxWidth,e.mq="(min-width:"+e.minWidth+") and (max-width:"+e.maxWidth+")",e.mqGuid=u.base+"__"+f++,e.type="height"===e.property?"outerHeight":"outerWidth",e.target?t.isArray(e.target)||(e.target=[e.target]):e.target=["> *"],n(),t.mediaquery("bind",e.mqGuid,e.mq,{enter:function(){l.call(e.$el,e)},leave:function(){r.call(e.$el,e)}})}function o(t){c(t),n()}function a(t){if(t.enabled)for(var e,i,n,s=0;s<t.target.length;s++){e=0,i=0,n=t.$el.find(t.target[s]),n.css(t.property,"");for(var o=0;o<n.length;o++)i=n.eq(o)[t.type](),i>e&&(e=i);n.css(t.property,e)}}function r(t){t.enabled&&(t.enabled=!1,c(t))}function l(t){t.enabled||(t.enabled=!0,a(t))}function c(t){for(var e=0;e<t.target.length;e++)t.$el.find(t.target[e]).css(t.property,"")}var d=e.Plugin("equalize",{widget:!0,priority:5,defaults:{maxWidth:1/0,minWidth:"0px",property:"height",target:null},methods:{_construct:s,_destruct:o,_resize:i}}),p=d.classes,u=p.raw,h=d.functions,f=0,m=[]}(jQuery,Formstone),!function(t,e){"use strict";function i(){E.iterate.call(S,l)}function n(){S=t(P.base)}function s(i){var s;i.maxWidth=i.maxWidth===1/0?"100000px":i.maxWidth,i.mq="(min-width:"+i.minWidth+") and (max-width:"+i.maxWidth+")",i.mqGuid=I.base+"__"+T++,e.support.transform||(i.useMargin=!0);var o="",l="";if(i.controls&&(o+='<div class="'+I.controls+'">',o+='<button type="button" class="'+[I.control,I.control_previous].join(" ")+'">'+i.labels.previous+"</button>",o+='<button type="button" class="'+[I.control,I.control_next].join(" ")+'">'+i.labels.next+"</button>",o+="</div>"),i.pagination&&(l+='<div class="'+I.pagination+'">',l+="</div>"),this.addClass([I.base,i.customClass].join(" ")).wrapInner('<div class="'+I.wrapper+'"><div class="'+I.container+'"><div class="'+I.canister+'"></div></div></div>').append(o).wrapInner('<div class="'+I.viewport+'"></div>').append(l),i.$viewport=this.find(P.viewport).eq(0),i.$container=this.find(P.container).eq(0),i.$canister=this.find(P.canister).eq(0),i.$controls=this.find(P.controls).eq(0),i.$pagination=this.find(P.pagination).eq(0),i.$items=i.$canister.children().addClass(I.item),i.$controlItems=i.$controls.find(P.control),i.$paginationItems=i.$pagination.find(P.page),i.$images=i.$canister.find("img"),i.index=0,i.enabled=!1,i.leftPosition=0,i.totalImages=i.$images.length,i.autoTimer=null,"object"===t.type(i.show)){var c=i.show,d=[];for(s in c)c.hasOwnProperty(s)&&d.push(s);d.sort(E.sortAsc),i.show={};for(s in d)d.hasOwnProperty(s)&&(i.show[d[s]]={width:parseInt(d[s]),count:c[d[s]]})}if(t.mediaquery("bind",i.mqGuid,i.mq,{enter:function(){r.call(i.$el,i)},leave:function(){a.call(i.$el,i)}}),i.totalImages>0)for(i.loadedImages=0,s=0;s<i.totalImages;s++){var p=i.$images.eq(s);p.one(O.load,i,h),(p[0].complete||p[0].height)&&p.trigger(O.load)}i.autoAdvance&&(i.autoTimer=E.startTimer(i.autoTimer,i.autoTime,function(){f(i)},!0)),n()}function o(e){E.clearTimer(e.autoTimer),a.call(this,e),t.mediaquery("unbind",e.mqGuid,e.mq),e.$items.removeClass([I.item,I.visible].join(" ")).unwrap().unwrap(),e.pagination&&e.$pagination.remove(),e.controls&&e.$controls.remove(),this.removeClass([I.base,I.enabled,I.animated,e.customClass].join(" ")),n()}function a(t){t.enabled&&(E.clearTimer(t.autoTimer),t.enabled=!1,this.removeClass([I.enabled,I.animated].join(" ")).off(O.namespace),t.$canister.touch("destroy").off(O.namespace).attr("style","").css(j,"none"),t.$items.css({width:"",height:""}),t.$controls.removeClass(I.visible),t.$pagination.removeClass(I.visible).html(""),t.useMargin?t.$canister.css({marginLeft:""}):t.$canister.css(z,""),t.index=0)}function r(t){t.enabled||(t.enabled=!0,this.addClass(I.enabled).on(O.clickTouchStart,P.control,t,m).on(O.clickTouchStart,P.page,t,g),t.$canister.touch({axis:"x",pan:!0,swipe:!0}).on(O.panStart,t,b).on(O.pan,t,_).on(O.panEnd,t,x).on(O.swipe,t,k).css(j,""),l.call(this,t))}function l(t){if(t.enabled){var e,i,n,s,o;if(t.count=t.$items.length,t.count<1)return;for(this.removeClass(I.animated),t.containerWidth=t.$container.outerWidth(!1),t.visible=w(t),t.perPage=t.paged?1:t.visible,t.itemMargin=parseInt(t.$items.eq(0).css("marginRight"))+parseInt(t.$items.eq(0).css("marginLeft")),t.itemWidth=(t.containerWidth-t.itemMargin*(t.visible-1))/t.visible,t.itemHeight=0,t.pageWidth=t.paged?t.itemWidth:t.containerWidth,t.pageCount=Math.ceil(t.count/t.perPage),t.$canister.css({width:(t.pageWidth+t.itemMargin)*t.pageCount}),t.$items.css({width:t.itemWidth,height:""}).removeClass(I.visible),t.pages=[],e=0,i=0;e<t.count;e+=t.perPage)n=t.$items.slice(e,e+t.perPage),n.length<t.perPage&&(n=0===e?t.$items:t.$items.slice(t.$items.length-t.perPage)),s=n.eq(0),o=s.outerHeight(),t.pages.push({left:s.position().left,height:o,$items:n}),o>t.itemHeight&&(t.itemHeight=o),i++;t.paged&&(t.pageCount-=t.count%t.visible),t.maxMove=-t.pages[t.pageCount-1].left,t.autoHeight&&t.$items.css({height:t.itemHeight});var a="";for(e=0;e<t.pageCount;e++)a+='<button type="button" class="'+I.page+'">'+(e+1)+"</button>";t.$pagination.html(a),t.pageCount<=1?(t.$controls.removeClass(I.visible),t.$pagination.removeClass(I.visible)):(t.$controls.addClass(I.visible),t.$pagination.addClass(I.visible)),t.$paginationItems=t.$el.find(P.page),v(t,t.index,!1),setTimeout(function(){t.$el.addClass(I.animated)},5)}}function c(t){t.enabled&&(t.$items=t.$canister.children().addClass(I.item),l.call(this,t))}function d(t,e){t.enabled&&(E.clearTimer(t.autoTimer),v(t,e-1))}function p(t){var e=t.index-1;t.infinite&&0>e&&(e=t.pageCount-1),v(t,e)}function u(t){var e=t.index+1;t.infinite&&e>=t.pageCount&&(e=0),v(t,e)}function h(t){var e=t.data;e.loadedImages++,e.loadedImages===e.totalImages&&l.call(e.$el,e)}function f(t){var e=t.index+1;e>=t.pageCount&&(e=0),v(t,e)}function m(e){E.killEvent(e);var i=e.data,n=i.index+(t(e.currentTarget).hasClass(I.control_next)?1:-1);E.clearTimer(i.autoTimer),v(i,n)}function g(e){E.killEvent(e);var i=e.data,n=i.$paginationItems.index(t(e.currentTarget));E.clearTimer(i.autoTimer),v(i,n)}function v(t,e,i){0>e&&(e=t.infinite?t.pageCount-1:0),e>=t.pageCount&&(e=t.infinite?0:t.pageCount-1),t.pages[e]&&(t.leftPosition=-t.pages[e].left),t.leftPosition<t.maxMove&&(t.leftPosition=t.maxMove),(t.leftPosition>0||isNaN(t.leftPosition))&&(t.leftPosition=0),t.useMargin?t.$canister.css({marginLeft:t.leftPosition}):i===!1?(t.$canister.css(j,"none").css(z,"translateX("+t.leftPosition+"px)"),setTimeout(function(){t.$canister.css(j,"")},5)):t.$canister.css(z,"translateX("+t.leftPosition+"px)"),t.$items.removeClass(I.visible),t.pages[e].$items.addClass(I.visible),i!==!1&&e!==t.index&&(t.infinite||e>-1&&e<t.pageCount)&&t.$el.trigger(O.update,[e]),t.index=e,y(t)}function y(t){t.$paginationItems.removeClass(I.active).eq(t.index).addClass(I.active),t.infinite?t.$controlItems.addClass(I.visible):t.pageCount<1?t.$controlItems.removeClass(I.visible):(t.$controlItems.addClass(I.visible),t.index<=0?t.$controlItems.filter(P.control_previous).removeClass(I.visible):(t.index>=t.pageCount||t.leftPosition===t.maxMove)&&t.$controlItems.filter(P.control_next).removeClass(I.visible))}function w(i){if("object"===t.type(i.show)){for(var n in i.show)if(i.show.hasOwnProperty(n)&&e.windowWidth>=i.show[n].width)return i.fill&&i.count<i.show[n].count?i.count:i.show[n].count;return 1}return i.fill&&i.count<i.show?i.count:i.show}function b(t){var e=t.data;if(e.useMargin)e.leftPosition=parseInt(e.$canister.css("marginLeft"));else{var i=e.$canister.css(z).split(",");e.leftPosition=parseInt(i[4])}e.$canister.css(j,"none"),_(t),e.isTouching=!0}function _(t){var e=t.data;e.touchLeft=e.leftPosition+t.deltaX,e.touchLeft>0&&(e.touchLeft=0),e.touchLeft<e.maxMove&&(e.touchLeft=e.maxMove),e.useMargin?e.$canister.css({marginLeft:e.touchLeft}):e.$canister.css(z,"translateX("+e.touchLeft+"px)")}function x(t){var e=t.data,i=t.deltaX>-50&&t.deltaX<50?e.index:e.index+("left"===t.directionX?1:-1);C(e,i)}function k(t){var e=t.data,i=e.index+("left"===t.directionX?1:-1);C(e,i)}function C(t,e){t.$canister.css(j,""),v(t,e),t.isTouching=!1}var M=e.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,useMargin:!1},classes:["viewport","wrapper","container","canister","item","controls","control","pagination","page","animated","enabled","visible","active","control_previous","control_next"],events:{update:"update",panStart:"panstart",pan:"pan",panEnd:"panend",swipe:"swipe"},methods:{_construct:s,_destruct:o,_resize:i,disable:a,enable:r,jump:d,previous:p,next:u,reset:c,resize:l}}),P=M.classes,I=P.raw,O=M.events,E=M.functions,T=0,S=[],z=e.transform,j=e.transition}(jQuery,Formstone),!function(t,e){"use strict";function i(){x.iterate.call(C,m)}function n(){C=t(w.base)}function s(e){e.guid="__"+M++,e.youTubeGuid=0,e.eventGuid=_.namespace+e.guid,e.rawGuid=b.base+e.guid,e.classGuid="."+e.rawGuid,e.$container=t('<div class="'+b.container+'"></div>').appendTo(this),
this.addClass([b.base,e.customClass].join(" "));var i=e.source;e.source=null,a(e,i,!0),n()}function o(t){t.$container.remove(),this.removeClass([b.base,t.customClass].join(" ")).off(_.namespace),n()}function a(e,i,n){if(i!==e.source){if(e.source=i,e.responsive=!1,e.isYouTube=!1,"object"===t.type(i)&&"string"===t.type(i.video)){var s=i.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);s&&s.length>=1&&(e.isYouTube=!0,e.videoId=s[1])}if(e.isYouTube)e.playing=!1,e.playerReady=!1,e.posterLoaded=!1,d(e,i,n);else if("object"===t.type(i)&&i.hasOwnProperty("poster"))c(e,i,n);else{var o=i;if("object"===t.type(i)){var a,p={},u=[];for(a in i)i.hasOwnProperty(a)&&u.push(a);u.sort(x.sortAsc);for(a in u)u.hasOwnProperty(a)&&(p[u[a]]={width:parseInt(u[a]),url:i[u[a]]});e.responsive=!0,e.sources=p,o=r(e)}l(e,o,!1,n)}}else e.$el.trigger(_.loaded)}function r(t){if(t.responsive)for(var i in t.sources)if(t.sources.hasOwnProperty(i)&&e.windowWidth>=t.sources[i].width)return t.sources[i].url;return t.source}function l(e,i,n,s){var o=[b.media,b.image,s!==!0?b.animated:""].join(" "),a=t('<div class="'+o+'"><img></div>'),r=a.find("img"),l=i;r.one(_.load,function(){P&&a.addClass(b["native"]).css({backgroundImage:"url('"+l+"')"}),a.transition({property:"opacity"},function(){n||p(e)}).css({opacity:1}),g(e),(!n||s)&&e.$el.trigger(_.loaded)}).attr("src",l),e.responsive&&a.addClass(b.responsive),e.$container.append(a),(r[0].complete||4===r[0].readyState)&&r.trigger(_.load),e.currentSource=l}function c(i,n,s){if(i.source&&i.source.poster&&(l(i,i.source.poster,!0,!0),s=!1),!e.isMobile){var o=[b.media,b.video,s!==!0?b.animated:""].join(" "),a='<div class="'+o+'">';a+="<video",i.loop&&(a+=" loop"),i.mute&&(a+=" muted"),a+=">",i.source.webm&&(a+='<source src="'+i.source.webm+'" type="video/webm" />'),i.source.mp4&&(a+='<source src="'+i.source.mp4+'" type="video/mp4" />'),i.source.ogg&&(a+='<source src="'+i.source.ogg+'" type="video/ogg" />'),a+="</video>",a+="</div>";var r=t(a),c=r.find("video");c.one(_.loadedMetaData,function(){r.transition({property:"opacity"},function(){p(i)}).css({opacity:1}),g(i),i.$el.trigger(_.loaded),i.autoPlay&&this.play()}),i.$container.append(r)}}function d(i,n,s){if(!i.videoId){var o=n.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);i.videoId=o[1]}if(i.posterLoaded||(i.source.poster||(i.source.poster="http://img.youtube.com/vi/"+i.videoId+"/0.jpg"),i.posterLoaded=!0,l(i,i.source.poster,!0,s),s=!1),!e.isMobile)if(t("script[src*='youtube.com/iframe_api']").length||t("head").append('<script src="//www.youtube.com/iframe_api"></script>'),I){var a=i.guid+"_"+i.youTubeGuid++,r=[b.media,b.embed,s!==!0?b.animated:""].join(" "),c='<div class="'+r+'">';c+='<div id="'+a+'"></div>',c+="</div>";var d=t(c),u=t.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:a,loop:i.loop?1:0,autoplay:1,origin:k.location.protocol+"//"+k.location.host},i.youtubeOptions);i.$container.append(d),i.player&&(i.oldPlayer=i.player,i.player=null),i.player=new k.YT.Player(a,{videoId:i.videoId,playerVars:u,events:{onReady:function(){i.playerReady=!0,i.mute&&i.player.mute(),i.autoPlay&&i.player.playVideo()},onStateChange:function(t){i.playing||t.data!==k.YT.PlayerState.PLAYING?i.loop&&i.playing&&t.data===k.YT.PlayerState.ENDED&&i.player.playVideo():(i.playing=!0,i.autoPlay||i.player.pauseVideo(),d.transition({property:"opacity"},function(){p(i)}).css({opacity:1}),g(i),i.$el.trigger(_.loaded)),i.$el.find(w.embed).addClass(b.ready)},onPlaybackQualityChange:function(){},onPlaybackRateChange:function(){},onError:function(){},onApiChange:function(){}}}),g(i)}else O.push({data:i,source:n})}function p(t){var e=t.$container.find(w.media);e.length>=1&&(e.not(":last").remove(),t.oldPlayer=null)}function u(t){var e=t.$container.find(w.media);e.length>=1&&e.transition({property:"opacity"},function(){e.remove(),delete t.source}).css({opacity:0})}function h(t){if(t.isYouTube&&t.playerReady)t.player.pauseVideo();else{var e=t.$container.find("video");e.length&&e[0].pause()}}function f(t){if(t.isYouTube&&t.playerReady)t.player.playVideo();else{var e=t.$container.find("video");e.length&&e[0].play()}}function m(t){if(t.responsive){var e=r(t);e!==t.currentSource?l(t,e,!1,!0):g(t)}else g(t)}function g(t){for(var e=t.$container.find(w.media),i=0,n=e.length;n>i;i++){var s=e.eq(i),o=t.isYouTube?"iframe":s.find("video").length?"video":"img",a=s.find(o);if(a.length&&("img"!==o||!P)){var r=t.$el.outerWidth(),l=t.$el.outerHeight(),c=v(t,a);t.width=c.width,t.height=c.height,t.left=0,t.top=0;var d=t.isYouTube?t.embedRatio:t.width/t.height;t.height=l,t.width=t.height*d,t.width<r&&(t.width=r,t.height=t.width/d),t.left=-(t.width-r)/2,t.top=-(t.height-l)/2,s.css({height:t.height,width:t.width,left:t.left,top:t.top})}}}function v(e,i){if(e.isYouTube)return{height:500,width:500/e.embedRatio};if(i.is("img")){var n=i[0];if("undefined"!==t.type(n.naturalHeight))return{height:n.naturalHeight,width:n.naturalWidth};var s=new Image;return s.src=n.src,{height:s.height,width:s.width}}return{height:i[0].videoHeight,width:i[0].videoWidth}}var y=e.Plugin("background",{widget:!0,defaults:{autoPlay:!0,customClass:"",embedRatio:1.777777,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:s,_destruct:o,_resize:i,play:f,pause:h,resize:g,load:a,unload:u}}),w=y.classes,b=w.raw,_=y.events,x=y.functions,k=e.window,C=[],M=0,P="backgroundSize"in e.document.documentElement.style,I=!1,O=[];k.onYouTubeIframeAPIReady=function(){I=!0;for(var t in O)O.hasOwnProperty(t)&&d(O[t].data,O[t].source);O=[]}}(jQuery,Formstone),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof exports?module.exports=e():t.Headhesive=e()}(this,function(){"use strict";var t=function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]="object"==typeof i[n]?t(e[n],i[n]):i[n]);return e},e=function(t,e){var i=Date.now||function(){return(new Date).getTime()},n,s,o,a=null,r=0,l=function(){r=i(),a=null,o=t.apply(n,s),n=s=null};return function(){var c=i(),d=e-(c-r);return n=this,s=arguments,0>=d?(clearTimeout(a),a=null,r=c,o=t.apply(n,s),n=s=null):a||(a=setTimeout(l,d)),o}},i=function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},n=function(t,e){for(var i=0,n=t.offsetHeight;t;)i+=t.offsetTop,t=t.offsetParent;return"bottom"===e&&(i+=n),i},s=function(e,i){"querySelector"in document&&"addEventListener"in window&&(this.visible=!1,this.options={offset:300,offsetSide:"top",classes:{clone:"headhesive",stick:"headhesive--stick",unstick:"headhesive--unstick"},throttle:250,onInit:function(){},onStick:function(){},onUnstick:function(){},onDestroy:function(){}},this.elem="string"==typeof e?document.querySelector(e):e,this.options=t(this.options,i),this.init())};return s.prototype={constructor:s,init:function(){if(this.clonedElem=this.elem.cloneNode(!0),this.clonedElem.className+=" "+this.options.classes.clone,document.body.insertBefore(this.clonedElem,document.body.firstChild),"number"==typeof this.options.offset)this.scrollOffset=this.options.offset;else{if("string"!=typeof this.options.offset)throw new Error("Invalid offset: "+this.options.offset);this._setScrollOffset()}this._throttleUpdate=e(this.update.bind(this),this.options.throttle),this._throttleScrollOffset=e(this._setScrollOffset.bind(this),this.options.throttle),window.addEventListener("scroll",this._throttleUpdate,!1),window.addEventListener("resize",this._throttleScrollOffset,!1),this.options.onInit.call(this)},_setScrollOffset:function(){"string"==typeof this.options.offset&&(this.scrollOffset=n(document.querySelector(this.options.offset),this.options.offsetSide))},destroy:function(){document.body.removeChild(this.clonedElem),window.removeEventListener("scroll",this._throttleUpdate),window.removeEventListener("resize",this._throttleScrollOffset),this.options.onDestroy.call(this)},stick:function(){this.visible||(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.unstick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.stick,this.visible=!0,this.options.onStick.call(this))},unstick:function(){this.visible&&(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.stick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.unstick,this.visible=!1,this.options.onUnstick.call(this))},update:function(){i()>this.scrollOffset?this.stick():this.unstick()}},s}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function($){function t(t){if(t in d.style)return t;for(var e=["Moz","Webkit","O","ms"],i=t.charAt(0).toUpperCase()+t.substr(1),n=0;n<e.length;++n){var s=e[n]+i;if(s in d.style)return s}}function e(){return d.style[p.transform]="",d.style[p.transform]="rotateY(90deg)",""!==d.style[p.transform]}function i(t){return"string"==typeof t&&this.parse(t),this}function n(t,e,i){e===!0?t.queue(i):e?t.queue(e,i):t.each(function(){i.call(this)})}function s(t){var e=[];return $.each(t,function(t){t=$.camelCase(t),t=$.transit.propertyMap[t]||$.cssProps[t]||t,t=r(t),p[t]&&(t=r(p[t])),-1===$.inArray(t,e)&&e.push(t)}),e}function o(t,e,i,n){var o=s(t);$.cssEase[i]&&(i=$.cssEase[i]);var a=""+c(e)+" "+i;parseInt(n,10)>0&&(a+=" "+c(n));var r=[];return $.each(o,function(t,e){r.push(e+" "+a)}),r.join(", ")}function a(t,e){e||($.cssNumber[t]=!0),$.transit.propertyMap[t]=p.transform,$.cssHooks[t]={get:function(e){var i=$(e).css("transit:transform");return i.get(t)},set:function(e,i){var n=$(e).css("transit:transform");n.setFromString(t,i),$(e).css({"transit:transform":n})}}}function r(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function l(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(t){var e=t;return"string"!=typeof e||e.match(/^[\-0-9\.]+/)||(e=$.fx.speeds[e]||$.fx.speeds._default),l(e,"ms")}$.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),p={},u=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.filter=t("Filter"),p.transform3d=e();var h={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},f=p.transitionEnd=h[p.transition]||null;for(var m in p)p.hasOwnProperty(m)&&"undefined"==typeof $.support[m]&&($.support[m]=p[m]);return d=null,$.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},$.cssHooks["transit:transform"]={get:function(t){return $(t).data("transform")||new i},set:function(t,e){var n=e;n instanceof i||(n=new i(n)),"WebkitTransform"!==p.transform||u?t.style[p.transform]=n.toString():t.style[p.transform]=n.toString(!0),$(t).data("transform",n)}},$.cssHooks.transform={set:$.cssHooks["transit:transform"].set},$.cssHooks.filter={get:function(t){return t.style[p.filter]},set:function(t,e){t.style[p.filter]=e}},$.fn.jquery<"1.8"&&($.cssHooks.transformOrigin={get:function(t){return t.style[p.transformOrigin]},set:function(t,e){t.style[p.transformOrigin]=e}},$.cssHooks.transition={get:function(t){return t.style[p.transition]},set:function(t,e){t.style[p.transition]=e}}),a("scale"),a("scaleX"),a("scaleY"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),i.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),i.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=l(t,"deg")},rotateX:function(t){this.rotateX=l(t,"deg")},rotateY:function(t){this.rotateY=l(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=l(t,"deg")},skewY:function(t){this.skewY=l(t,"deg")},perspective:function(t){this.perspective=l(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=l(t,"px")),null!==e&&void 0!==e&&(this._translateY=l(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=l(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,i,n){e.setFromString(i,n)})},toString:function(t){var e=[];for(var i in this)if(this.hasOwnProperty(i)){if(!p.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&(t&&"scale"===i?e.push(i+"3d("+this[i]+",1)"):t&&"translate"===i?e.push(i+"3d("+this[i]+",0)"):e.push(i+"("+this[i]+")"))}return e.join(" ")}},$.fn.transition=$.fn.transit=function(t,e,i,s){var a=this,r=0,l=!0,d=$.extend(!0,{},t);"function"==typeof e&&(s=e,e=void 0),"object"==typeof e&&(i=e.easing,r=e.delay||0,l="undefined"==typeof e.queue?!0:e.queue,s=e.complete,e=e.duration),"function"==typeof i&&(s=i,i=void 0),"undefined"!=typeof d.easing&&(i=d.easing,delete d.easing),"undefined"!=typeof d.duration&&(e=d.duration,delete d.duration),"undefined"!=typeof d.complete&&(s=d.complete,delete d.complete),"undefined"!=typeof d.queue&&(l=d.queue,delete d.queue),"undefined"!=typeof d.delay&&(r=d.delay,delete d.delay),"undefined"==typeof e&&(e=$.fx.speeds._default),"undefined"==typeof i&&(i=$.cssEase._default),e=c(e);var u=o(d,e,i,r),h=$.transit.enabled&&p.transition,m=h?parseInt(e,10)+parseInt(r,10):0;if(0===m){var g=function(t){a.css(d),s&&s.apply(a),t&&t()};return n(a,l,g),a}var v={},y=function(t){var e=!1,i=function(){e&&a.unbind(f,i),m>0&&a.each(function(){this.style[p.transition]=v[this]||null}),"function"==typeof s&&s.apply(a),"function"==typeof t&&t()};m>0&&f&&$.transit.useTransitionEnd?(e=!0,a.bind(f,i)):window.setTimeout(i,m),a.each(function(){m>0&&(this.style[p.transition]=u),$(this).css(d)})},w=function(t){this.offsetWidth,y(t)};return n(a,l,w),this},$.transit.getTransitionValue=o,$}),function(t,e,i,n){var s,o,a;s={activateCurrent:function(t){this.html_element.find("select").val(t)},getHtml:function(){var e=this,i="",n;if(1<this.ln){for(i+='<select class="dropdown controls '+this.o.controls_cssclass+'">',this.ShowOnMenu(this.view_all_key)&&(i+='<option value="'+this.view_all_key+'">'+this.o.view_all_text+"</option>"),n=0;n<this.ln;n+=1)this.ShowOnMenu(n)&&(i+='<option value="'+(n+1)+'">'+(this.o.locations[n].title||"#"+(n+1))+"</option>");i=t(i+"</select>").bind("change",function(){e.ViewOnMap(this.value)})}return(n=this.o.controls_title)&&(n=t('<div class="controls_title"></div>').css(this.o.controls_applycss?{fontWeight:"bold",fontSize:this.o.controls_on_map?"12px":"inherit",padding:"3px 10px 5px 0"}:{}).append(this.o.controls_title)),this.html_element=t('<div class="wrap_controls"></div>').append(n).append(i)}},o={html_a:function(e,i,n){var s=this;return i=i||e+1,n=n||this.o.locations[e].title,e=t('<a data-load="'+i+'" id="ullist_a_'+i+'" href="#'+i+'" title="'+n+'"><span>'+(n||"#"+(e+1))+"</span></a>"),e.css(this.o.controls_applycss?{color:"#666",display:"block",padding:"5px",fontSize:this.o.controls_on_map?"12px":"inherit",textDecoration:"none"}:{}),e.on("click",function(e){e.preventDefault(),e=t(this).attr("data-load"),s.ViewOnMap(e)}),e},activateCurrent:function(t){this.html_element.find("li").removeClass("active"),this.html_element.find("#ullist_a_"+t).parent().addClass("active")},getHtml:function(){var e=t("<ul class='ullist controls "+this.o.controls_cssclass+"'></ul>").css(this.o.controls_applycss?{margin:0,padding:0,listStyleType:"none"}:{}),i;for(this.ShowOnMenu(this.view_all_key)&&e.append(t("<li></li>").append(o.html_a.call(this,!1,this.view_all_key,this.o.view_all_text))),i=0;i<this.ln;i++)this.ShowOnMenu(i)&&e.append(t("<li></li>").append(o.html_a.call(this,i)));return(i=this.o.controls_title)&&(i=t('<div class="controls_title"></div>').css(this.o.controls_applycss?{fontWeight:"bold",padding:"3px 10px 5px 0",fontSize:this.o.controls_on_map?"12px":"inherit"}:{}).append(this.o.controls_title)),this.html_element=t('<div class="wrap_controls"></div>').append(i).append(e)}},a=function(){function e(e){this.VERSION="0.1.33",this.loaded=!1,this.markers=[],this.circles=[],this.oMap=!1,this.view_all_key="all",this.infowindow=null,this.ln=this.maxZIndex=0,this.oMap=!1,this.directionsDisplay=this.directionsService=this.Fusion=this.Polygon=this.Polyline=this.current_index=this.current_control=this.controls_wrapper=this.canvas_map=this.map_div=this.oBounds=null,this.o={debug:!1,map_div:"#gmap",controls_div:"#controls",generate_controls:!0,controls_type:"dropdown",controls_cssclass:"",controls_title:"",controls_on_map:!0,controls_applycss:!0,controls_position:i.maps.ControlPosition.RIGHT_TOP,type:"marker",view_all:!0,view_all_text:"View All",pan_on_click:!0,start:0,locations:[],shared:{},map_options:{mapTypeId:i.maps.MapTypeId.ROADMAP},stroke_options:{strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.4},directions_options:{travelMode:i.maps.TravelMode.DRIVING,unitSystem:i.maps.UnitSystem.METRIC,optimizeWaypoints:!1,provideRouteAlternatives:!1,avoidHighways:!1,avoidTolls:!1},circle_options:{radius:100,visible:!0},styles:{},fusion_options:{},directions_panel:null,draggable:!1,editable:!1,show_infowindows:!0,show_markers:!0,infowindow_type:"bubble",listeners:{},beforeViewAll:function(){},afterViewAll:function(){},beforeShow:function(t,e,i){},afterShow:function(t,e,i){},afterCreateMarker:function(t,e,i){},beforeCloseInfowindow:function(t,e){},afterCloseInfowindow:function(t,e){},beforeOpenInfowindow:function(t,e,i){},afterOpenInfowindow:function(t,e,i){},afterRoute:function(t,e,i){},onPolylineClick:function(t){},onPolygonClick:function(t){},circleRadiusChanged:function(t,e,i){},circleCenterChanged:function(t,e,i){},drag:function(t,e,i){},dragEnd:function(t,e,i){},dragStart:function(t,e,i){}},this.AddControl("dropdown",s),this.AddControl("list",o),e&&"directions"===e.type&&(!e.show_markers&&(e.show_markers=!1),!e.show_infowindows&&(e.show_infowindows=!1)),t.extend(!0,this.o,e)}return e.prototype.controls={},e.prototype.create_objMap=function(){var e=0,n;for(n in this.o.styles)this.o.styles.hasOwnProperty(n)&&(0===e&&(this.o.map_options.mapTypeControlOptions={mapTypeIds:[i.maps.MapTypeId.ROADMAP]}),e++,this.o.map_options.mapTypeControlOptions.mapTypeIds.push("map_style_"+e));if(this.loaded)this.oMap.setOptions(this.o.map_options);else try{this.map_div.css({position:"relative",overflow:"hidden"}),this.canvas_map=t("<div>").addClass("canvas_map").css({width:"100%",height:"100%"}).appendTo(this.map_div),this.oMap=new i.maps.Map(this.canvas_map.get(0),this.o.map_options)}catch(s){this.debug("create_objMap::"+this.map_div.selector,s.toString())}e=0;for(n in this.o.styles)this.o.styles.hasOwnProperty(n)&&(e++,this.oMap.mapTypes.set("map_style_"+e,new i.maps.StyledMapType(this.o.styles[n],{name:n})),this.oMap.setMapTypeId("map_style_"+e))},e.prototype.add_markers_to_objMap=function(){var t,e;switch(t=this.o.type||"marker"){case"marker":for(t=0;t<this.ln;t++)e=this.create_objPoint(t),this.create.marker.call(this,t,e);break;default:this.create[t].apply(this)}},e.prototype.create_objPoint=function(e){e=t.extend({},this.o.locations[e]);var s=e.visible===n?n:e.visible;return!e.type&&(e.type=this.o.type),e.map=this.oMap,e.position=new i.maps.LatLng(e.lat,e.lon),e.zIndex=e.zIndex===n?1e4:e.zIndex+100,e.visible=s===n?this.o.show_markers:s,this.o.maxZIndex=e.zIndex>this.maxZIndex?e.zIndex:this.maxZIndex,e.image&&(e.icon=new i.maps.MarkerImage(e.image,new i.maps.Size(e.image_w||32,e.image_h||32),new i.maps.Point(0,0),new i.maps.Point((e.image_w||32)/2,(e.image_h||32)/2))),e},e.prototype.create_objCircle=function(e){var i,n,s;return s=t.extend({},e),i=t.extend({},this.o.stroke_options),n=t.extend({},this.o.circle_options),t.extend(i,e.stroke_options||{}),t.extend(s,i),t.extend(n,e.circle_options||{}),t.extend(s,n),s.center=e.position,s.draggable=!1,s.zIndex=0<e.zIndex?e.zIndex-10:1,s},e.prototype.add_markerEv=function(t,e,n){var s=this;i.maps.event.addListener(n,"click",function(i){s.o.beforeShow(t,e,n),s.o.show_infowindows&&!1!==e.show_infowindow&&s.open_infowindow(t,n,i),s.o.pan_on_click&&!1!==e.pan_on_click&&(s.oMap.panTo(e.position),e.zoom&&s.oMap.setZoom(e.zoom)),s.current_control&&s.o.generate_controls&&s.current_control.activateCurrent&&s.current_control.activateCurrent.call(s,t+1),s.current_index=t,s.o.afterShow(t,e,n)}),e.draggable&&this.add_dragEv(t,e,n)},e.prototype.add_circleEv=function(t,e,n){var s=this;i.maps.event.addListener(n,"click",function(){s.ViewOnMap(t+1)}),i.maps.event.addListener(n,"center_changed",function(){s.o.circleCenterChanged(t,e,n)}),i.maps.event.addListener(n,"radius_changed",function(){s.o.circleRadiusChanged(t,e,n)}),e.draggable&&this.add_dragEv(t,e,n)},e.prototype.add_dragEv=function(t,e,n){var s=this;i.maps.event.addListener(n,"drag",function(o){var a;if(n.getPosition)o=n.getPosition();else{if(!n.getCenter)return;o=n.getCenter()}if(s.circles[t]&&s.circles[t].setCenter(o),s.Polyline?a="Polyline":s.Polygon&&(a="Polygon"),a){for(var r=s[a].getPath().getArray(),l=[],c=0;c<r.length;++c)l[c]=t===c?new i.maps.LatLng(o.lat(),o.lng()):new i.maps.LatLng(r[c].lat(),r[c].lng());s[a].setPath(new i.maps.MVCArray(l)),s.add_polyEv(a)}s.o.drag(t,e,n)}),i.maps.event.addListener(n,"dragend",function(){s.o.dragEnd(t,e,n)}),i.maps.event.addListener(n,"dragstart",function(){s.o.dragStart(t,e,n)}),i.maps.event.addListener(n,"center_changed",function(){s.markers[t]&&n.getCenter&&s.markers[t].setPosition(n.getCenter()),s.o.drag(t,e,n)})},e.prototype.add_polyEv=function(t){var e=this;i.maps.event.addListener(this[t].getPath(),"set_at",function(n,s){var o=e[t].getPath().getAt(n),o=new i.maps.LatLng(o.lat(),o.lng());e.markers[n]&&e.markers[n].setPosition(o),e.circles[n]&&e.circles[n].setCenter(o),e.o["on"+t+"Changed"](n,s,e[t].getPath().getArray())})},e.prototype.create={marker:function(t,e,n){var s;return"circle"!=e.type||n||(s=this.create_objCircle(e),e.visible||(s.draggable=e.draggable),n=new i.maps.Circle(s),this.add_circleEv(t,s,n),this.circles[t]=n),e.type="marker",n=new i.maps.Marker(e),this.add_markerEv(t,e,n),this.oBounds.extend(e.position),this.markers[t]=n,this.o.afterCreateMarker(t,e,n),n},circle:function(){var t,e,n,s;for(t=0;t<this.ln;t++)e=this.create_objPoint(t),"circle"==e.type&&(n=this.create_objCircle(e),e.visible||(n.draggable=e.draggable),s=new i.maps.Circle(n),this.add_circleEv(t,n,s),this.circles[t]=s),e.type="marker",this.create.marker.call(this,t,e,s)},polyline:function(){var e,n,s=t.extend({},this.o.stroke_options);for(s.path=[],s.draggable=this.o.draggable,s.editable=this.o.editable,s.map=this.oMap,s.zIndex=this.o.maxZIndex+100,e=0;e<this.ln;e++)n=this.create_objPoint(e),this.create.marker.call(this,e,n),s.path.push(n.position);this.Polyline?this.Polyline.setOptions(s):this.Polyline=new i.maps.Polyline(s),this.add_polyEv("Polyline")},polygon:function(){var e=this,n,s,o=t.extend({},this.o.stroke_options);for(o.path=[],o.draggable=this.o.draggable,o.editable=this.o.editable,o.map=this.oMap,o.zIndex=this.o.maxZIndex+100,n=0;n<this.ln;n++)s=this.create_objPoint(n),this.create.marker.call(this,n,s),o.path.push(s.position);this.Polygon?this.Polygon.setOptions(o):this.Polygon=new i.maps.Polygon(o),i.maps.event.addListener(this.Polygon,"click",function(t){e.o.onPolygonClick(t)}),this.add_polyEv("Polygon")},fusion:function(){this.o.fusion_options.styles=[this.o.stroke_options],this.o.fusion_options.map=this.oMap,this.Fusion?this.Fusion.setOptions(this.o.fusion_options):this.Fusion=new i.maps.FusionTablesLayer(this.o.fusion_options)},directions:function(){var e=this,n,s,o,a,r,l=[],c=0;for(n=0;n<this.ln;n++)s=this.create_objPoint(n),0===n?a=s.position:n===this.ln-1?r=s.position:(o=!0===this.o.locations[n].stopover?!0:!1,l.push({location:s.position,stopover:o})),this.create.marker.call(this,n,s);this.o.directions_options.origin=a,this.o.directions_options.destination=r,this.o.directions_options.waypoints=l,this.directionsService||(this.directionsService=new i.maps.DirectionsService),this.directionsDisplay?this.directionsDisplay.setOptions({draggable:this.o.draggable}):this.directionsDisplay=new i.maps.DirectionsRenderer({draggable:this.o.draggable}),this.directionsDisplay.setMap(this.oMap),this.o.directions_panel&&(this.o.directions_panel=t(this.o.directions_panel),this.directionsDisplay.setPanel(this.o.directions_panel.get(0))),this.o.draggable&&i.maps.event.addListener(this.directionsDisplay,"directions_changed",function(){c=e.compute_distance(e.directionsDisplay.directions),e.o.afterRoute(c)}),this.directionsService.route(this.o.directions_options,function(t,n){n===i.maps.DirectionsStatus.OK&&(c=e.compute_distance(t),e.directionsDisplay.setDirections(t)),e.o.afterRoute(c,n,t)})}},e.prototype.compute_distance=function(t){var e=0,i=t.routes[0],n=i.legs.length;for(t=0;n>t;t++)e+=i.legs[t].distance.value;return e},e.prototype.type_to_open={bubble:function(t){this.infowindow=new i.maps.InfoWindow({content:t.html||""})}},e.prototype.open_infowindow=function(t,e,i){this.CloseInfoWindow(),i=this.o.locations[t];var n=this.o.infowindow_type;i.html&&this.type_to_open[n]&&(this.o.beforeOpenInfowindow(t,i,e),this.type_to_open[n].call(this,i),this.infowindow.open(this.oMap,e),this.o.afterOpenInfowindow(t,i,e))},e.prototype.get_html_controls=function(){return this.controls[this.o.controls_type]&&this.controls[this.o.controls_type].getHtml?(this.current_control=this.controls[this.o.controls_type],this.current_control.getHtml.apply(this)):""},e.prototype.generate_controls=function(){if(this.o.controls_on_map){var e=t('<div class="on_gmap '+this.o.controls_type+' gmap_controls"></div>').css(this.o.controls_applycss?{margin:"5px"}:{}),i=t(this.get_html_controls()).css(this.o.controls_applycss?{background:"#fff",padding:"5px",border:"1px solid rgb(113,123,135)",boxShadow:"rgba(0, 0, 0, 0.4) 0px 2px 4px",maxHeight:this.map_div.find(".canvas_map").outerHeight()-80,minWidth:100,overflowY:"auto",overflowX:"hidden"}:{});e.append(i),this.oMap.controls[this.o.controls_position].push(e.get(0))}else this.controls_wrapper.empty(),this.controls_wrapper.append(this.get_html_controls())},e.prototype.init_map=function(){var t=this;this.Polyline&&this.Polyline.setMap(null),this.Polygon&&this.Polygon.setMap(null),this.Fusion&&this.Fusion.setMap(null),this.directionsDisplay&&this.directionsDisplay.setMap(null);for(var e=this.markers.length-1;e>=0;--e)try{this.markers[e]&&this.markers[e].setMap(null)}catch(n){t.debug("init_map::markers::setMap",n.stack)}for(this.markers.length=0,this.markers=[],e=this.circles.length-1;e>=0;--e)try{this.circles[e]&&this.circles[e].setMap(null)}catch(s){t.debug("init_map::circles::setMap",s.stack)}this.circles.length=0,this.circles=[],this.o.controls_on_map&&this.oMap.controls&&this.oMap.controls[this.o.controls_position].forEach(function(e,i){try{t.oMap.controls[this.o.controls_position].removeAt(i)}catch(n){t.debug("init_map::removeAt",n.stack)}}),this.oBounds=new i.maps.LatLngBounds},e.prototype.perform_load=function(){1===this.ln?(this.o.map_options.set_center?this.oMap.setCenter(new i.maps.LatLng(this.o.map_options.set_center[0],this.o.map_options.set_center[1])):(this.oMap.fitBounds(this.oBounds),this.ViewOnMap(1)),this.o.map_options.zoom&&this.oMap.setZoom(this.o.map_options.zoom)):0===this.ln?(this.o.map_options.set_center?this.oMap.setCenter(new i.maps.LatLng(this.o.map_options.set_center[0],this.o.map_options.set_center[1])):this.oMap.fitBounds(this.oBounds),this.oMap.setZoom(this.o.map_options.zoom||1)):(this.oMap.fitBounds(this.oBounds),"number"==typeof(this.o.start-0)&&0<this.o.start&&this.o.start<=this.ln?this.ViewOnMap(this.o.start):this.o.map_options.set_center?this.oMap.setCenter(new i.maps.LatLng(this.o.map_options.set_center[0],this.o.map_options.set_center[1])):this.ViewOnMap(this.view_all_key),this.o.map_options.zoom&&this.oMap.setZoom(this.o.map_options.zoom))},e.prototype.debug=function(t,e){return this.o.debug&&console.log(t,e),this},e.prototype.AddControl=function(t,e){return t&&e?(this.controls[t]=e,this):(self.debug("AddControl",'Missing "name" and "func" callback.'),!1)},e.prototype.CloseInfoWindow=function(){return this.infowindow&&(this.current_index||0===this.current_index)&&(this.o.beforeCloseInfowindow(this.current_index,this.o.locations[this.current_index]),this.infowindow.close(),this.infowindow=null,this.o.afterCloseInfowindow(this.current_index,this.o.locations[this.current_index])),this},e.prototype.ShowOnMenu=function(t){return t===this.view_all_key&&this.o.view_all&&1<this.ln?!0:(t=parseInt(t,10),"number"==typeof(t-0)&&t>=0&&t<this.ln&&!1!==this.o.locations[t].on_menu?!0:!1)},e.prototype.ViewOnMap=function(t){if(t===this.view_all_key)this.o.beforeViewAll(),this.current_index=t,0<this.o.locations.length&&this.o.generate_controls&&this.current_control&&this.current_control.activateCurrent&&this.current_control.activateCurrent.apply(this,[t]),this.oMap.fitBounds(this.oBounds),this.CloseInfoWindow(),this.o.afterViewAll();else if(t=parseInt(t,10),"number"==typeof(t-0)&&t>0&&t<=this.ln)try{i.maps.event.trigger(this.markers[t-1],"click")}catch(e){this.debug("ViewOnMap::trigger",e.stack)}return this},e.prototype.SetLocations=function(t,e){return this.o.locations=t,e&&this.Load(),this},e.prototype.AddLocations=function(e,i){var n=this;return t.isArray(e)&&t.each(e,function(t,e){n.o.locations.push(e)}),t.isPlainObject(e)&&this.o.locations.push(e),i&&this.Load(),this},e.prototype.AddLocation=function(e,i,n){return t.isPlainObject(e)&&this.o.locations.splice(i,0,e),n&&this.Load(),this},e.prototype.RemoveLocations=function(e,i){
var n=this,s=0;return t.isArray(e)?t.each(e,function(t,e){e-s<n.ln&&n.o.locations.splice(e-s,1),s++}):e<this.ln&&this.o.locations.splice(e,1),i&&this.Load(),this},e.prototype.Loaded=function(){return this.loaded},e.prototype._init=function(){this.ln=this.o.locations.length;for(var e=0;e<this.ln;e++){var i=t.extend({},this.o.shared);this.o.locations[e]=t.extend(i,this.o.locations[e]),this.o.locations[e].html&&(this.o.locations[e].html=this.o.locations[e].html.replace("%index",e+1),this.o.locations[e].html=this.o.locations[e].html.replace("%title",this.o.locations[e].title||""))}return this.map_div=t(this.o.map_div),this.controls_wrapper=t(this.o.controls_div),this},e.prototype.Load=function(e){t.extend(!0,this.o,e),e&&e.locations&&(this.o.locations=e.locations),this._init(),!1===this.o.visualRefresh?i.maps.visualRefresh=!1:i.maps.visualRefresh=!0,this.init_map(),this.create_objMap(),this.add_markers_to_objMap(),1<this.ln&&this.o.generate_controls||this.o.force_generate_controls?(this.o.generate_controls=!0,this.generate_controls()):this.o.generate_controls=!1;var n=this;if(this.loaded)this.perform_load();else{i.maps.event.addListenerOnce(this.oMap,"idle",function(){n.perform_load()}),i.maps.event.addListener(this.oMap,"resize",function(){n.canvas_map.css({width:n.map_div.width(),height:n.map_div.height()})});for(var s in this.o.listeners){var o=this.oMap,a=this.o.listeners[s];this.o.listeners.hasOwnProperty(s)&&i.maps.event.addListener(this.oMap,s,function(t){a(o,t)})}}return this.loaded=!0,this},e}(),"function"==typeof define&&define.amd?define(function(){return a}):e.Maplace=a}(jQuery,this,google);